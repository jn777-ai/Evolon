<!DOCTYPE html>
<html lang="ja"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>商品評価 - フリマアプリ</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
<div class="container">

    <h1>商品評価（到着確認）</h1>

    <p>
        商品「<span th:text="${order.item.name}"></span>」の出品者
        「<span th:text="${order.item.seller.name}"></span>」を評価してください。
    </p>

    <!-- エラーメッセージ -->
    <div th:if="${errorMessage}"
         class="error-message"
         th:text="${errorMessage}">
    </div>

    <!-- 到着確認 + レビュー送信フォーム -->
    <form th:action="@{/orders/{id}/receive-and-review(id=${order.id})}" method="post">
        <!-- CSRF -->
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">

        <!-- 評価（二択） -->
        <p>
            <label>評価：</label><br>
            <label>
                <input type="radio" name="result" value="GOOD" required>
                良い
            </label>
            <label style="margin-left: 12px;">
                <input type="radio" name="result" value="BAD" required>
                悪い
            </label>
        </p>

        <!-- コメント（必須） -->
        <p>
            <label for="comment">コメント（必須）：</label>
            <textarea id="comment"
                      name="comment"
                      rows="5"
                      maxlength="500"
                      required
                      placeholder="理由を必ず入力してください（例：梱包が丁寧でした／説明と状態が違いました など）"></textarea>
        </p>

        <!-- ボタン -->
        <div class="button-group">
            <button type="submit" class="button">到着確認して評価する</button>
            <a th:href="@{/my-page/orders}" class="button secondary">キャンセル</a>
        </div>
    </form>

</div>
</body>
</html>
